pipeline {
    agent { label "linux" }
    tools {
        maven "MAVEN_HOME"
        jdk "JAVA_HOME"
    }

    stages {
        stage('Check-In') {
            steps {
                git 'https://github.com/daticahealth/java-war-deploy-example.git'
            }
        }
        stage('Initialize') {
            steps {
                echo "PATH = ${M2_HOME}/bin:${PATH}"
                echo "M2_HOME = /usr/share/maven"
            }
        }
        stage("Build Automation") {
            steps {
                dir("/home/docker/jenkins_home/jenkins_home/workspace/Commercial-Product/development-CICD/commercial-dev-cicd")
                sh 'mvn clean install package'
            }
        }
    }
}
